# 🔄 MegaNodes API - Callback Responses

This page explains **how to respond appropriately** to callback requests sent by MegaNodes API in **Seamless Mode**.  

> If you use **Money Transfer Mode**, you do not need to read this page.

Once our API sends a callback request to your backend, you need to **parse it accurately** and respond appropriately.

---

## ⚠️ Timeout Guidelines

| Command | Maximum Response Time |
|---------|---------------------|
| `bet`, `balance` | 2 seconds |
| Other commands | 4 seconds |

---

## ✅ Validation Response Formats

Before parsing the request body, validate the `check` field. Split it by commas and validate each check code.  
If validation fails, respond with the specified JSON format.

| Check | Description | Response Format (If Validation Fails) |
|-------|------------|--------------------------------------|
| 21 | Check if a player is authenticated | `{"result": 21, "status": "ERROR"}` |
| 22 | Check if a player is activated | `{"result": 22, "status": "ERROR"}` |
| 31 | Check if a player's balance is sufficient | `{"result": 31, "status": "ERROR", "data": {"balance": 0}}` |
| 41 | Check if a transaction has already been processed | `{"result": 41, "status": "ERROR", "data": {"balance": 0}}` |
| 42 | Check if a transaction is initialized | `{"result": 42, "status": "ERROR", "data": {"balance": 0}}` |

---

## 📝 Command Response Formats

If **validation succeeds**, execute actions according to the command in the callback request body.  

### 1. `authenticate`

| Outcome | Response |
|---------|----------|
| Success | `{"result": 0, "status": "OK", "data": {"account": "test1234", "balance": 100}}` |

### 2. `balance`

| Outcome | Response |
|---------|----------|
| Success | `{"result": 0, "status": "OK", "data": {"balance": 100}}` |

### 3. `bet`

| Outcome | Response |
|---------|----------|
| Success | `{"result": 0, "status": "OK", "data": {"balance": 100}}` |
| Fail    | `{"result": 99, "status": "ERROR", "data": {"balance": 100}}` |

### 4. `win`

| Outcome | Response |
|---------|----------|
| Success | `{"result": 0, "status": "OK", "data": {"balance": 100}}` |
| Fail    | `{"result": 99, "status": "ERROR", "data": {"balance": 100}}` |

### 5. `cancel`

| Outcome | Response |
|---------|----------|
| Success | `{"result": 0, "status": "OK", "data": {"balance": 100}}` |
| Fail    | `{"result": 99, "status": "ERROR", "data": {"balance": 100}}` |

### 6. `status`

| Outcome | Response |
|---------|----------|
| Transaction succeeded | `{"result": 0, "status": "OK", "data": {"trans_id": 1676358191, "trans_status": "OK"}}` |
| Transaction canceled | `{"result": 0, "status": "OK", "data": {"trans_id": 1676358191, "trans_status": "CANCELED"}}` |

---

> For detailed parsing examples and coding instructions, refer to the **[Seamless Integration Code Examples](./09.seamless-mode-code-examples.md)** page.
